(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66560bf0","chunk-5d484e5c","chunk-504d58be","chunk-733c315e","chunk-0d4a9936","chunk-2d22bd8d"],{"0af1":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"competitors-container"},[t._l(t.value,function(e,a){return[n("el-row",[n("el-col",{attrs:{span:4}},[n("el-input",{staticClass:"article-textarea",attrs:{rows:3,type:"textarea",autosize:"",placeholder:t.$t("messages.stores.input.competitors_children.name")},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"v.name"}})],1),t._v(" "),n("el-col",{attrs:{span:4,offset:1}},[n("el-input",{staticClass:"article-textarea",attrs:{rows:3,type:"textarea",autosize:"",placeholder:t.$t("messages.stores.input.competitors_children.money")},model:{value:e.money,callback:function(n){t.$set(e,"money",n)},expression:"v.money"}})],1),t._v(" "),n("el-col",{attrs:{span:10,offset:1}},[n("el-input",{staticClass:"article-textarea",attrs:{rows:3,type:"textarea",autosize:"",placeholder:t.$t("messages.stores.input.competitors_children.introduce")},model:{value:e.introduce,callback:function(n){t.$set(e,"introduce",n)},expression:"v.introduce"}})],1),t._v(" "),a>0?n("el-col",{attrs:{span:1,offset:1}},[n("el-button",{on:{click:function(n){return t.removeItem(e)}}},[n("i",{staticClass:"el-icon-delete"})])],1):t._e()],1)]}),t._v(" "),n("el-row",{attrs:{gutter:50}},[n("el-col",{attrs:{span:10}},[n("el-button",{on:{click:t.addItem}},[t._v(t._s(t.$t("messages.button.create"))+t._s(t.$t("messages.stores.input.competitors")))])],1)],1)],2)},o=[],i={name:"",money:"",introduce:""},r=[Object.assign({},i)],s={name:"Competitors",props:{value:{type:Array,default:void 0}},data:function(){return{}},computed:{},created:function(){this.value||this.emitInput(r)},watch:{},methods:{removeItem:function(t){var e=Object.assign([],this.value),n=e.indexOf(t);-1!==n&&e.splice(n,1),this.emitInput(e)},addItem:function(){var t=Object.assign([],this.value);t.push(Object.assign({},i)),this.emitInput(t)},emitInput:function(t){this.$emit("input",t)}}},c=s,u=(n("ba74"),n("2877")),d=Object(u["a"])(c,a,o,!1,null,"ce9981b6",null);e["default"]=d.exports},"1ecf":function(t,e,n){"use strict";var a=n("ac22"),o=n.n(a);o.a},"39dd":function(t,e,n){"use strict";var a=n("4062"),o=n.n(a);o.a},"3f5e":function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return i});var a=n("b775");function o(t){return Object(a["a"])({url:"/index/files/save",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/index/files/read/id/"+t,method:"get"})}},4062:function(t,e,n){},"599c":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var a=n("b775");function o(t){return Object(a["a"])({url:"/index/areas/index",method:"get",params:t})}},"6adb":function(t,e,n){"use strict";var a=n("f57a"),o=n.n(a);o.a},"73f5":function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"d",function(){return r}),n.d(e,"o",function(){return s}),n.d(e,"a",function(){return c}),n.d(e,"e",function(){return u}),n.d(e,"f",function(){return d}),n.d(e,"i",function(){return l}),n.d(e,"m",function(){return p}),n.d(e,"l",function(){return f}),n.d(e,"h",function(){return m}),n.d(e,"k",function(){return h}),n.d(e,"g",function(){return v}),n.d(e,"j",function(){return g}),n.d(e,"n",function(){return b});var a=n("b775");function o(t){return Object(a["a"])({url:"/index/stores/index",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/index/stores/read/id/".concat(t),method:"get"})}function r(t){return Object(a["a"])({url:"/index/stores/save",method:"post",data:t})}function s(t,e){return Object(a["a"])({url:"/index/stores/update/id/".concat(t),method:"put",data:e})}function c(t){return Object(a["a"])({url:"/index/stores/delete/id/".concat(t),method:"delete"})}function u(t){return Object(a["a"])({url:"/index/stores/statisticCreate",method:"get",params:t})}function d(t){return Object(a["a"])({url:"/index/stores/statisticNow",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/index/stores/saveMarket",method:"post",data:t})}function p(t,e){return Object(a["a"])({url:"/index/stores/updateMarket/id/".concat(t),method:"put",data:e})}function f(t,e){return Object(a["a"])({url:"/index/stores/updateIntroduce/id/".concat(t),method:"put",data:e})}function m(t){return Object(a["a"])({url:"/index/stores/saveAgent",method:"post",data:t})}function h(t,e){return Object(a["a"])({url:"/index/stores/updateAgent/id/".concat(t),method:"put",data:e})}function v(t){return Object(a["a"])({url:"/index/stores/all",method:"get",params:t})}function g(t){return Object(a["a"])({url:"/index/stores/saveShop",method:"post",data:t})}function b(t,e){return Object(a["a"])({url:"/index/stores/updateShop/id/".concat(t),method:"put",data:e})}},"75cf":function(t,e,n){"use strict";n.r(e);var a,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"createPost-container"},[n("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:t.postForm}},[n("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar "+t.postForm.status}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:t.submitForm}},[t._v(t._s(t.$t("messages.stores.button.submit")))])],1),t._v(" "),n("div",{staticClass:"createPost-main-container"},[n("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{prop:"title"}},[n("MDinput",{attrs:{maxlength:100,name:"name",required:""},model:{value:t.postForm.name,callback:function(e){t.$set(t.postForm,"name",e)},expression:"postForm.name"}},[t._v(t._s(t.$t("messages.stores.input.name")))])],1),t._v(" "),n("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{"label-width":"72px",label:t.$t("messages.stores.input.module_id")}},[n("Parent",{attrs:{module_id:1},model:{value:t.postForm.parent_id,callback:function(e){t.$set(t.postForm,"parent_id",e)},expression:"postForm.parent_id"}})],1)],1)],1)],1)},i=[],r=(n("7f7f"),n("cebc")),s=n("bd86"),c=n("fbf8"),u=n("1aba"),d=n("b804"),l=n("73f5"),p=(n("828d"),n("f15a"),n("0af1")),f=n("b6e6"),m=n("da0e"),h=n("c5a5"),v=(n("5c96"),n("599c"),n("816b")),g=(n("4128"),a={name:"",module_id:void 0,parent_id:void 0,cover_file_id:void 0,area_code:[],location:"",lat:"",lng:"",phone:"",business_hours:"",address:"",introduce:"",business_scope:"",range:"",sales_area:"",plan_file_id:void 0,establishment_time:0},Object(s["a"])(a,"sales_area",""),Object(s["a"])(a,"competitors",""),a),b={name:"DetailMarketAgent",components:{MDinput:u["a"],Upload:c["a"],Sticky:d["a"],Competitors:p["default"],Map:f["default"],Area:m["default"],Parent:h["default"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{module_id:0,parent_module_id:0,parent_id:0,map:void 0,polyEditor:void 0,zoom:16,center:[121.59996,31.197646],postForm:Object.assign({},g),loading:!1,userListOptions:[],tempRoute:{},area_props:{value:"code",label:"name",children:"children"},area_options:[],module_options:[],display_module:!1,mapData:void 0}},computed:{},watch:{},created:function(){if(this.center=[121.59996,31.197646],this.isEdit){var t=this.$route.params&&this.$route.params.store_id;this.fetchData(t)}else this.postForm=Object.assign({},g);this.module_id=this.$route.meta.module_id,this.postForm.module_id=this.module_id,this.tempRoute=Object.assign({},this.$route)},mounted:function(){},methods:{indexModule:function(t){var e=this;Object(v["a"])({parent_id:t}).then(function(t){e.module_options=t.data}).catch(function(t){console.log(t)})},fetchData:function(t){var e=this;Object(l["c"])(t).then(function(t){e.postForm=Object.assign({},Object(r["a"])({},g,{id:t.data.id,name:t.data.name,parent_id:t.data.parent_id}))}).catch(function(t){console.log(t)})},submitForm:function(){var t=this;this.loading=!0;var e=Object.assign({},Object(r["a"])({},this.postForm,this.mapData));this.isEdit?Object(l["k"])(e.id,e).then(function(e){1==e.code&&t.$notify({title:t.$t("messages.title.success"),message:t.$t("messages.success"),type:"success",duration:2e3,onClose:function(){t.$router.go(-1)}}),t.loading=!1}).catch(function(){t.loading=!1}):Object(l["h"])(e).then(function(e){1==e.code&&t.$notify({title:t.$t("messages.title.success"),message:t.$t("messages.success"),type:"success",duration:2e3,onClose:function(){t.$router.go(-1)}}),t.loading=!1}).catch(function(){t.loading=!1})},resetMap:function(){var t=this.$refs.area.getAreaName(this.postForm.area_code);t=t.join(" ");var e=t+" "+this.postForm.address;this.$refs.map.resetMap(e)}}},_=b,x=(n("1ecf"),n("2877")),O=Object(x["a"])(_,o,i,!1,null,"1b42c33f",null);e["default"]=O.exports},"816b":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var a=n("b775");function o(t){return Object(a["a"])({url:"/index/modules/index",method:"get",params:t})}},"828d":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var a=n("b775");function o(t){return Object(a["a"])({url:"/search/user",method:"get",params:{name:t}})}},aaff:function(t,e,n){},ac22:function(t,e,n){},b6e6:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map-container"},[n("div",{staticClass:"amap-wrapper",attrs:{id:"id"}}),t._v(" "),n("div",{staticClass:"range-edit"},[n("div",{staticClass:"range-edit-button",staticStyle:{"margin-bottom":"5px"},on:{click:function(e){return t.polyEditor.open()}}},[t._v(t._s(t.$t("messages.stores.input.range_edit")))]),t._v(" "),n("div",{staticClass:"range-save-button",on:{click:function(e){return t.polyEditor.close()}}},[t._v(t._s(t.$t("messages.stores.input.range_save")))])])])},o=[],i=(n("ac6a"),n("6b54"),n("28a5"),n("8f9b")),r=n("4128"),s={lat:"",lng:"",range:[]},c={name:"Map",props:{value:{type:Object,default:function(){return s}},id:{type:String,default:void 0},isEdit:{type:Boolean,default:!1}},data:function(){return{map:void 0}},computed:{},created:function(){},mounted:function(){var t=this;setTimeout(function(){var e=this;i["lazyAMapApiLoaderInstance"].load().then(function(){function n(t){}function a(t){Message(t.message)}t.isEdit?e.map=new AMap.Map(e.id,{center:[t.value.lng,t.value.lat],zoom:16}):(e.map=new AMap.Map(e.id,{resizeEnable:!0,zoom:16}),AMap.plugin("AMap.Geolocation",function(){var t=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0});setTimeout(function(){o.addControl(t)},0),t.getCurrentPosition(function(t,e){"complete"==t?n(e):a(e)})}));var o=t.map=e.map;if(t.isEdit){var i=new AMap.Marker({icon:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",position:[t.value.lng,t.value.lat]});o.add(i),t.setRange(t.map,t.value.lng,t.value.lat,t.value.range)}e.map.on("click",function(e){var n=new AMap.Marker({icon:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",position:[e.lnglat.getLng(),e.lnglat.getLat()]});o.clearMap(),o.add(n);var a=e.lnglat.getLng(),i=e.lnglat.getLat();t.value.lng=a,t.value.lat=i,console.log(t.value),t.setRange(o,a,i)})})},1e3)},watch:{},methods:{emitInput:function(t){this.$emit("input",t)},resetMap:function(t){var e=this;i["lazyAMapApiLoaderInstance"].load().then(function(){AMap.plugin("AMap.Geocoder",function(){var n=new AMap.Geocoder,a=new AMap.Marker;n.getLocation(t,function(t,n){if("complete"===t&&n.geocodes.length){var o=n.geocodes[0].location;a.setPosition(o),e.map.setFitView(a)}})})})},setRange:function(t,e,n,a){var o=this,i=Object.assign({},this.value);e=new r["Decimal"](e),n=new r["Decimal"](n),a||(a=[[e.minus(2e-4).toFixed(6),n.minus(2e-4).toFixed(6)],[e.minus(2e-4).toFixed(6),n.add(2e-4).toFixed(6)],[e.add(2e-4).toFixed(6),n.add(2e-4).toFixed(6)],[e.add(2e-4).toFixed(6),n.minus(2e-4).toFixed(6)]]),i.range=a,o.emitInput(i);var s=Object.assign([],a),c=new AMap.Polygon({path:s,strokeColor:"#FF33FF",strokeWeight:6,strokeOpacity:.2,fillOpacity:.4,fillColor:"#1791fc",zIndex:50});t.add(c),t.setFitView([c]);var u=new AMap.PolyEditor(t,c);u.on("addnode",function(t){console.log("触发事件：addnode")}),u.on("adjust",function(t){console.log("触发事件：adjust")}),u.on("removenode",function(t){console.log("触发事件：removenode")}),u.on("end",function(t){console.log("触发事件： end");var e=t.target.toString().split(";"),n=new Array;e.forEach(function(t,e){n.push(t.split(","))}),i.range=n,o.emitInput(i)}),this.polyEditor=u}}},u=c,d=(n("39dd"),n("2877")),l=Object(d["a"])(u,a,o,!1,null,"1d24c798",null);e["default"]=l.exports},ba74:function(t,e,n){"use strict";var a=n("aaff"),o=n.n(a);o.a},c5a5:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"parent-container"},[n("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.valueData,callback:function(e){t.valueData=e},expression:"valueData"}},t._l(t.options,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)},o=[],i=(n("96cf"),n("3b8d")),r=(n("c5f6"),n("73f5")),s={name:"Parent",props:{value:{type:Number,default:void 0},module_id:{type:Number,default:0}},data:function(){return{options:[],valueData:this.value}},computed:{},created:function(){},mounted:function(){this.initOptions()},watch:{valueData:function(t){this.emitInput(t)},value:function(t){this.valueData=t}},methods:{emitInput:function(t){this.$emit("input",t)},initOptions:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["g"])({module_id:this.module_id});case 2:e=t.sent,this.options=e.data;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},c=s,u=(n("6adb"),n("2877")),d=Object(u["a"])(c,a,o,!1,null,"764a1082",null);e["default"]=d.exports},cc2c:function(t,e,n){},d849:function(t,e,n){"use strict";var a=n("cc2c"),o=n.n(a);o.a},da0e:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"area-container"},[n("el-cascader",{attrs:{options:t.area_options,props:t.area_props},on:{"active-item-change":t.handleAreaItemChange,change:t.handleAreaChange},model:{value:t.valueData,callback:function(e){t.valueData=e},expression:"valueData"}})],1)},o=[],i=(n("7f7f"),n("ac6a"),n("599c")),r={name:"Area",props:{value:{type:Array,default:function(){return[]}}},data:function(){return{area_options:[],area_props:{value:"code",label:"name",children:"children"},valueData:this.value}},computed:{},created:function(){},mounted:function(){this.initArea()},watch:{valueData:function(t){this.emitInput(t)},value:function(t){this.valueData=t}},methods:{emitInput:function(t){this.$emit("input",t)},handleAreaItemChange:function(t){var e=this,n={};n.code=t[t.length-1],Object(i["a"])(n).then(function(n){e.setAreaChildren(t[t.length-1],n.data)}).catch(function(t){})},handleAreaChange:function(t){this.getAreaName(t)},getAreaName:function(t){var e=this,n=(this.area_options,[]);return e.area_options.forEach(function(e,a){return e.code==t[0]&&(n.push(e.name),e.children.forEach(function(e,a){return e.code==t[1]&&(n.push(e.name),e.children.forEach(function(e,a){return e.code==t[2]&&n.push(e.name),!0})),!0})),!0}),n},initArea:function(){var t=this;Object(i["a"])().then(function(e){var n=e.data;n.forEach(function(t,e){n[e].children=[]}),t.area_options=n}).catch(function(t){})},setAreaChildren:function(t,e){var n=this;this.area_options;n.area_options.forEach(function(a,o){a.code==t?(e.forEach(function(t,n){e[n].children=[]}),n.area_options[o].children=e):a.children.forEach(function(a,i){a.code==t&&(n.area_options[o].children[i].children=e)})})},initEditArea:function(t){var e=this;if(t&&3==t.length){var n={};n.code=t[0],Object(i["a"])(n).then(function(a){e.setAreaChildren(t[0],a.data),n.code=t[1],Object(i["a"])(n).then(function(n){e.setAreaChildren(t[1],n.data)}).catch(function(t){})}).catch(function(t){})}}}},s=r,c=(n("d849"),n("2877")),u=Object(c["a"])(s,a,o,!1,null,"37344f35",null);e["default"]=u.exports},f15a:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",[t._v("\n  Creating and editing pages cannot be cached by keep-alive because keep-alive include does not currently support\n  caching based on routes, so it is currently cached based on component name. If you want to achieve a similar caching\n  effect, you can use a browser caching scheme such as localStorage. Or do not use keep-alive include to cache all\n  pages directly. See details\n  "),n("a",{attrs:{href:"https://panjiachen.github.io/vue-element-admin-site/guide/essentials/tags-view.html",target:"_blank"}},[t._v("Document")])])}],i=n("2877"),r={},s=Object(i["a"])(r,a,o,!1,null,null,null);e["default"]=s.exports},f57a:function(t,e,n){}}]);
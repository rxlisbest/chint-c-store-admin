(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d4a9936"],{"39dd":function(e,t,n){"use strict";var a=n("4062"),o=n.n(a);o.a},4062:function(e,t,n){},b6e6:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-container"},[n("div",{staticClass:"amap-wrapper",attrs:{id:"id"}}),e._v(" "),n("div",{staticClass:"range-edit"},[n("div",{staticClass:"range-edit-button",staticStyle:{"margin-bottom":"5px"},on:{click:function(t){return e.polyEditor.open()}}},[e._v(e._s(e.$t("messages.stores.input.range_edit")))]),e._v(" "),n("div",{staticClass:"range-save-button",on:{click:function(t){return e.polyEditor.close()}}},[e._v(e._s(e.$t("messages.stores.input.range_save")))])])])},o=[],i=(n("ac6a"),n("6b54"),n("28a5"),n("8f9b")),s=n("4128"),c={lat:"",lng:"",range:[]},l={name:"Map",props:{value:{type:Object,default:function(){return c}},id:{type:String,default:void 0},isEdit:{type:Boolean,default:!1}},data:function(){return{map:void 0}},computed:{},created:function(){},mounted:function(){var e=this;setTimeout(function(){var t=this;i["lazyAMapApiLoaderInstance"].load().then(function(){function n(e){}function a(e){Message(e.message)}e.isEdit?t.map=new AMap.Map(t.id,{center:[e.value.lng,e.value.lat],zoom:16}):(t.map=new AMap.Map(t.id,{resizeEnable:!0,zoom:16}),AMap.plugin("AMap.Geolocation",function(){var e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0});setTimeout(function(){o.addControl(e)},0),e.getCurrentPosition(function(e,t){"complete"==e?n(t):a(t)})}));var o=e.map=t.map;if(e.isEdit){var i=new AMap.Marker({icon:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",position:[e.value.lng,e.value.lat]});o.add(i),e.setRange(e.map,e.value.lng,e.value.lat,e.value.range)}t.map.on("click",function(t){var n=new AMap.Marker({icon:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",position:[t.lnglat.getLng(),t.lnglat.getLat()]});o.clearMap(),o.add(n);var a=t.lnglat.getLng(),i=t.lnglat.getLat();e.value.lng=a,e.value.lat=i,console.log(e.value),e.setRange(o,a,i)})})},1e3)},watch:{},methods:{emitInput:function(e){this.$emit("input",e)},resetMap:function(e){var t=this;i["lazyAMapApiLoaderInstance"].load().then(function(){AMap.plugin("AMap.Geocoder",function(){var n=new AMap.Geocoder,a=new AMap.Marker;n.getLocation(e,function(e,n){if("complete"===e&&n.geocodes.length){var o=n.geocodes[0].location;a.setPosition(o),t.map.setFitView(a)}})})})},setRange:function(e,t,n,a){var o=this,i=Object.assign({},this.value);t=new s["Decimal"](t),n=new s["Decimal"](n),a||(a=[[t.minus(2e-4).toFixed(6),n.minus(2e-4).toFixed(6)],[t.minus(2e-4).toFixed(6),n.add(2e-4).toFixed(6)],[t.add(2e-4).toFixed(6),n.add(2e-4).toFixed(6)],[t.add(2e-4).toFixed(6),n.minus(2e-4).toFixed(6)]]),i.range=a,o.emitInput(i);var c=Object.assign([],a),l=new AMap.Polygon({path:c,strokeColor:"#FF33FF",strokeWeight:6,strokeOpacity:.2,fillOpacity:.4,fillColor:"#1791fc",zIndex:50});e.add(l),e.setFitView([l]);var r=new AMap.PolyEditor(e,l);r.on("addnode",function(e){console.log("触发事件：addnode")}),r.on("adjust",function(e){console.log("触发事件：adjust")}),r.on("removenode",function(e){console.log("触发事件：removenode")}),r.on("end",function(e){console.log("触发事件： end");var t=e.target.toString().split(";"),n=new Array;t.forEach(function(e,t){n.push(e.split(","))}),i.range=n,o.emitInput(i)}),this.polyEditor=r}}},r=l,d=(n("39dd"),n("2877")),u=Object(d["a"])(r,a,o,!1,null,"1d24c798",null);t["default"]=u.exports}}]);